<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Dashboard Tur칤stico de Ecuador</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      background: #f5f7fb;
      color: #222;
    }

    header {
      background: #1e56d8;
      color: white;
      padding: 20px;
      text-align: center;
      font-size: 26px;
      font-weight: bold;
    }

    header small {
      font-size: 14px;
      opacity: 0.9;
    }

    main {
      max-width: 1100px;
      margin: 20px auto;
      padding: 20px;
    }

    section {
      background: white;
      padding: 20px;
      margin-bottom: 25px;
      border-radius: 12px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.08);
    }

    h2 {
      margin-top: 0;
      font-size: 20px;
      border-left: 4px solid #1e56d8;
      padding-left: 10px;
    }

    .chart {
      height: 450px;
      margin-top: 15px;
    }

    .card {
      background: #ffffff;
      padding: 15px 20px;
      margin-bottom: 15px;
      border-radius: 10px;
      border-left: 5px solid #1e56d8;
      box-shadow: rgba(0,0,0,0.07) 0px 2px 6px;
    }

    .card h3 {
      margin: 0 0 10px 0;
      color: #1e56d8;
    }
  </style>

</head>
<body>

<header>
  游깴 Dashboard Tur칤stico de Ecuador  
  <br>
  <small>An치lisis de hospitalidad, precios y percepci칩n tur칤stica basado en rese침as y GPT</small>
</header>

<main>

  <!-- ====================== GRAFICO 1 ======================= -->
  <section>
    <h2>游늳 Weighted Score por Destino</h2>
    <div id="scoreChart" class="chart"></div>
  </section>

  <!-- ====================== GRAFICO 2 ======================= -->
  <section>
    <h2>游눯 Precio Promedio por Noche</h2>
    <div id="priceChart" class="chart"></div>
  </section>

  <!-- ====================== GRAFICO 3 ======================= -->
  <section>
    <h2>游늵 Relaci칩n entre Hoteles y Rese침as</h2>
    <div id="reviewsChart" class="chart"></div>
  </section>

  <!-- ====================== ANALISIS GPT ======================= -->
  <section>
    <h2>游 Conclusiones de IA por Destino</h2>
    <div id="analisisContainer"></div>
  </section>

</main>


<script>
  // Cargar el JSON generado por tu an치lisis
  fetch("analisis_destinos.json")
    .then(response => response.json())
    .then(data => {
      console.log("Datos cargados:", data);

      // ----- 1) Weighted Score -----
      const destinos = data.map(d => d.destino);
      const weighted = data.map(d => d.weighted_score);

      Plotly.newPlot("scoreChart", [{
        x: destinos,
        y: weighted,
        type: "bar",
        marker: {color: "#1e56d8"}
      }], {
        title: "Promedio de Weighted Score por Destino",
        margin: {t: 50}
      });

      // ----- 2) Precio Promedio -----
      const priceAvg = data.map(d => d.price_num);

      Plotly.newPlot("priceChart", [{
        x: destinos,
        y: priceAvg,
        type: "bar",
        marker: {color: "#e8a100"}
      }], {
        title: "Precio Promedio por Noche",
        margin: {t: 50}
      });

      // ----- 3) Hoteles vs Rese침as -----
      const n_hoteles = data.map(d => d.n_hoteles);
      const n_reviews = data.map(d => d.n_reviews);

      Plotly.newPlot("reviewsChart", [{
        x: n_hoteles,
        y: n_reviews,
        mode: "markers",
        type: "scatter",
        text: destinos,
        marker: {
          size: 14,
          color: "#6ea8ff"
        }
      }], {
        title: "Relaci칩n entre Hoteles y Rese침as",
        xaxis: {title: "N칰mero de Hoteles"},
        yaxis: {title: "N칰mero de Rese침as"},
        margin: {t: 50}
      });

      // ----- 4) Mostrar an치lisis GPT -----
      const container = document.getElementById("analisisContainer");

      data.forEach(d => {
        const card = document.createElement("div");
        card.className = "card";

        card.innerHTML = `
          <h3>${d.destino.toUpperCase()}</h3>
          <p>${d.analisis_gpt.replace(/\n/g, "<br>")}</p>
        `;

        container.appendChild(card);
      });

    })
    .catch(err => console.error("Error cargando el JSON:", err));
</script>

</body>
</html>
